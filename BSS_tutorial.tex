%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% LIVECOMS ARTICLE TEMPLATE FOR BEST PRACTICES GUIDE
%%% ADAPTED FROM ELIFE ARTICLE TEMPLATE (8/10/2017)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% PREAMBLE
\documentclass[9pt,tutorial]{livecoms}
% Use the 'onehalfspacing' option for 1.5 line spacing
% Use the 'doublespacing' option for 2.0 line spacing
% Use the 'lineno' option for adding line numbers.
% Use the "ASAPversion' option following article acceptance to add the DOI and relevant dates to the document footer.
% Use the 'pubversion' option for adding the citation and publication information to the document footer, when the LiveCoMS issue is finalized.
% The 'bestpractices' option for indicates that this is a best practices guide.
% Omit the bestpractices option to remove the marking as a LiveCoMS paper.
% Please note that these options may affect formatting.

\usepackage{lipsum} % Required to insert dummy text
\usepackage[version=4]{mhchem}
\usepackage{siunitx}
\DeclareSIUnit\Molar{M}
\usepackage[italic]{mathastext}
\graphicspath{{figures/}}
\usepackage{hyperref}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% IMPORTANT USER CONFIGURATION
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[colorinlistoftodos]{todonotes}
\newcommand{\versionnumber}{1.0}  % you should update the minor version number in preprints and major version number of submissions.
\newcommand{\githubrepository}{\url{https://github.com/myaccount/homegithubrepository}}  %this should be the main github repository for this article

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% ARTICLE SETUP
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{BioSimSpace Tutorial [Article v\versionnumber]}

\author[1*]{Antonia S J S Mey}
\author[1,2\authfn{1}\authfn{3}]{Lester Hedges}
\author[1]{Sofia Bariami}
\author[2\authfn{1}\authfn{4}]{Julien Michel}
\author[2*]{Christopher Woods}
\affil[1]{Edinburgh}
\affil[2]{Institution 2}

\corr{antonia.mey@ed.ac.uk}{AM}  % Correspondence emails.  FMS and FS are the appropriate authors initials.
\corr{email2@example.com}{FS}

\orcid{Author 1 name}{AAAA-BBBB-CCCC-DDDD}
\orcid{Author 2 name}{EEEE-FFFF-GGGG-HHHH}

\contrib[\authfn{1}]{These authors contributed equally to this work}
\contrib[\authfn{2}]{These authors also contributed equally to this work}

\presentadd[\authfn{3}]{Department, Institute, Country}
\presentadd[\authfn{4}]{Department, Institute, Country}

\blurb{This LiveCoMS document is maintained online on GitHub at \githubrepository; to provide feedback, suggestions, or help improve it, please visit the GitHub repository and participate via the issue tracker.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% PUBLICATION INFORMATION
%%% Fill out these parameters when available
%%% These are used when the "pubversion" option is invoked
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pubDOI{10.XXXX/YYYYYYY}
\pubvolume{<volume>}
\pubissue{<issue>}
\pubyear{<year>}
\articlenum{<number>}
\datereceived{Day Month Year}
\dateaccepted{Day Month Year}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% ARTICLE START
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\begin{frontmatter}
\maketitle

\begin{abstract}
BioSimSpace is an interoperable molecular simulation framework providing a uniform Python API for common molecular simulation packages such as Gromacs, NAMD, SOMD, and AMBER. This tutorial introduces different aspects of the API from basic simulation setup to more advanced types of simulations such as alchemical free energy simulations, as well as metadynamics simulations. 
\end{abstract}

\end{frontmatter}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% Introduction
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}
\label{sec:intro}
Molecular dynamics (MD) simulations are a widely used tool to get atomistic insight into the behavior of biological and soft matter systems, making important contributions to structural biology, pharmaceutical research, as well as material sciences~\cite{huggins2019biomolecular, rountree2002atomistic}. A vast array of different software tools are available to run and analyse MD simulations. This means as a new practitioner it is oftentimes quite difficult to get started with what software package to use for what scientific question. 
BioSimSpace(BSS) was designed in aid to alleviate this problem by trying to provide an interoperable versatile software frame work that can be easily adapted for the specific purpose required~\cite{hedges2019biosimspace}. It provides a common python API that will allow to run and analyse different types of MD simulations in a simulation platform agnostic way. This means that the same python script or command line tool can be used to run a simulation using Gromacs~\cite{vanderspoel2005gromacs}, AMBER~\cite{}, OpenMM~\cite{eastman2017openmm}, or NAMD~\cite{phillips2005scalable}. As part of BSS it is also possible to readily convert between different file formats supported across these common simulation platforms. Furthermore, it also aims to implement common best practices for setting simulation parameters making it less confusing for new practitioners who may not understand the zoo of possible parameters that can be set for a given simulation package. Another aspect is the level of abstraction introduced to run complex simulation such as alchemical free energy calculations~\cite{} of binding or metadynamics simualtions~\cite{}. This document aims to give an introduction on how to use BSS in conjunction with different software packages to perform different types of molecular dynamics simulation of varying difficulty.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% Scope
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Scope}
\label{sec:scope}
The document is divided into three tutorial sections. The basic BSS tutorial section~\ref{sec:basic_tutorial} introduces the software, how to run it using different interfaces such as a command-line approach or within a jupyter notebook. In section~\ref{sec:basic_tutorial} the user is slowly introduced to concepts of different complexity, starting with a simple question such as, how can I convert my Gromacs files, such that I can run them with AMBER convert in sec.~\ref{subsec:conversion}. Then through a series of steps the user is shown how to setup (sec.~\ref{subsec:setup} and run~\ref{subsec:running_MD} a basic molecular dynamics simulation. These steps are:
\begin{enumerate}
\item Parametrise the system 
\item Solvate the system
\item minimise the system
\item Equilibration
\item Running a molecular dynamics simulation of the solvated box
\end{enumerate}
After having completed the sec. ~\ref{subsec:setup} the user should be able to setup an unknown small molecule or protein in a solvent box for any of the supported MD simulation engines, either using a command-line interface or a jupyter notebook. They should be able to adjust simple simulation parameters such as the nuymber of minimisation steps, or how long the simulation should be run for. The user should also be able understand how to do some basic troubleshooting with provided error messages. 
Sec.~\ref{subsec:running_MD} illustrates how to actually run an MD simulation, adjust simulation lengths and reporting intervals. It also covers how simulations can be monitored 'on the fly' in a jupyter notebook environment with simple graph analyses and snapshots. 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% Prerequisites
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Prerequisites}
\label{sec:prerequisites}
The user is expected to have installed BioSimSpace version 2019.2 

\subsection{Background knowledge}
\label{subsec:background}
The tutorials can be run in different ways, either as command line tools from a Unix terminal, or as part of a Jupyter notebook. Familiarity with either or both is assumed. While BSS provides a high level layer around molecular simulation software it is still useful to have basic ideas on how molecular dynamics simulations work. As a starting point we recommend 

\subsection{Software/system requirements and installation}
\label{subsec:software}
\todo[inline, color={red!20}]{@Lester please write section}
Gromacs~\cite{}, Ambertools~\cite{}, OpenMM~\cite. Optional: Amber~\cite{}, 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% Prerequisites
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Content and links}
\label{sec:content}
All files needed for the tutorial can be found at \url{my/custom/url}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% Basic tutorials
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Basic BioSimSpace tutorials}
\label{sec:basic_tutorial}
BioSimSpace has a very versatile Python API that allows not just to write typical molecular dynamics simulation and analysis workflow, but can also be used for simple tasks such as converting between different MD file types. In the basic tutorial section file conversions, molecular simulation setup, including parametrisation, minimisation and equilibration as well as running MD simulations will be covered. 

\subsection{Conversions}
\label{subsec:conversion}
\todo[inline, color={red!20}]{@Toni please write section}

\subsection{Simulation setup}
\label{subsec:setup}

\subsubsection{Parametrisation and Solvation}
\todo[inline, color={red!20}]{@Sofia please write section}

\subsubsection{Minimisation}
\todo[inline, color={red!20}]{@Sofia please write section}

\subsubsection{Equilibration}
\todo[inline, color={red!20}]{@Sofia please write section}


\subsection{Running and analysing MD simulations}
\label{subsec:running_MD}
\todo[inline, color={red!20}]{@Toni please write section}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% Advanced tutorials
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Advanced BioSimSpace tutorials}
\label{sec:advanced_tutorial}

\subsection{Alchemical Free Energy calculations}
\todo[inline, color={red!20}]{@Toni please write section}
\todo[inline, color={red!20}]{@Sofia, @Cameron please review section}

\subsection{Metadynamics}
\todo[inline, color={red!20}]{@Lester/Toni/Dom please write section}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% API specifics
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Working with the API}
\label{sec:API_tutorial}
\todo[inline, color={red!20}]{@Lester please write section}




\section{Author Contributions}
%%%%%%%%%%%%%%%%
% This section mustt describe the actual contributions of
% author. Since this is an electronic-only journal, there is
% no length limit when you describe the authors' contributions,
% so we recommend describing what they actually did rather than
% simply categorizing them in a small number of
% predefined roles as might be done in other journals.
%
% See the policies ``Policies on Authorship'' section of https://livecoms.github.io
% for more information on deciding on authorship and author order.
%%%%%%%%%%%%%%%%

(Explain the contributions of the different authors here)

% We suggest you preserve this comment:
For a more detailed description of author contributions,
see the GitHub issue tracking and changelog at \githubrepository.

\section{Other Contributions}
%%%%%%%%%%%%%%%
% You should include all people who have filed issues that were
% accepted into the paper, or that upon discussion altered what was in the paper.
% Multiple significant contributions might mean that the contributor
% should be moved to authorship at the discretion of the a
%
% See the policies ``Policies on Authorship'' section of https://livecoms.github.io for
% more information on deciding on authorship and author order.
%%%%%%%%%%%%%%%

(Explain the contributions of any non-author contributors here)
% We suggest you preserve this comment:
For a more detailed description of contributions from the community and others, see the GitHub issue tracking and changelog at \githubrepository.

\section{Potentially Conflicting Interests}
%%%%%%%
%Declare any potentially competing interests, financial or otherwise
%%%%%%%

Declare any potentially conflicting interests here, whether or not they pose an actual conflict in your view.

\section{Funding Information}
%%%%%%%
% Authors should acknowledge funding sources here. Reference specific grants.
%%%%%%%
ASJSM, JM, LOH, and CW acknowledge funding through an EPSRC flagship software grant: EP/P022138/1

\section*{Author Information}
\makeorcid

\bibliography{bss_tutorial}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% APPENDICES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\appendix


\end{document}
